<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.webServer>
	<rewrite>
		<rules>
			<!-- Exclude app_offline.htm from the Rewrite Rule -->
			<!-- Handle app_offline.htm for Maintenance -->
			<rule name="Exclude app_offline.htm" stopProcessing="true">
			  <match url="^app_offline\.htm$" />
			  <action type="Rewrite" url="/app_offline.htm" />
			  <!-- <action type="None" /> -->
			</rule>
			
			<!-- Handle React Client-Side Routing -->
			<rule name="React Routes" stopProcessing="true">
				<match url=".*" />
				<conditions logicalGrouping="MatchAll">
					<add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
					<add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
					<add input="{REQUEST_URI}" pattern="^/(api)" negate="true" />
				</conditions>
				<action type="Rewrite" url="/" />
			</rule>
		</rules>
	</rewrite>
  </system.webServer>
</configuration>